{% load dataset_extras %}
<table class="table table-bordered table-condensed">
	<tr>
		<th>#</th>
		<th>File name</th>
		<th>Size</th>
		<th>Has GIS data?</th>
		<th>Upload date</th>
	</tr>
{% for f in ds.get_files %}
	<tr>
		<td>{{ forloop.counter }}</td>
		<td>{{ f.get_basename }}</td>
		<td class="text-right">{{ f.dataset_file.size|readable_filesize }}</td>
		<td class="text-right">
			<a href="{% url 'view_map_it' f.md5 %}" class="btn btn-xs btn-default">meta</a>
			&nbsp;
			{% if f.has_gis_data %}<a href="{% url 'view_geoconnect_map_it' f.md5 %}?cb={% url 'view_data_file_metadata_base_url' %}" xstyle="text-decoration:none;" target="mapit" class="btn btn-success btn-xs">Map It!</a>
			{% endif %}
			</td>
		<td class="text-center">{{ f.created|date:"M j, Y  P" }}</td>
	</tr>
	{% for geo_metadata in f.get_geographic_metadata %}
	<tr>
		<td colspan="5" class="text-center">
			<br /><iframe src="{{ geo_metadata.embed_map_link }}" width="350" height="200"></iframe>		
			<br />File visualized on <a href="{{ geo_metadata.layer_link }}">WorldMap</a>
			<br /><a href="{{ geo_metadata.layer_link }}">View on WorldMap</a>
		</td>
		<!--
		<td colspan="2">
			<ul>
				Layer name: {{ geo_metadata.layer_name }}</li>
				<li><a href="{{ geo_metadata.layer_link }}">View on WorldMap</a></li>
			</ul>			
		</td>
		-->
	</tr>
		
	{% endfor %}
{% empty %}
	<tr>
		<td colspan="5"><i>No files available</i></td>
	</tr>
{% endfor %}
</table>